#include "main.h"
#include <time.h>

//variaveis globais
int trava=0;
int c=0;
//função de tempo
void tps(){
	for(int i=0;i<10000;i++);
}
void delay(void){
    int x;
    for(x=0; x<5000; x++);
}

void offset(){
GPIOC->ODR=0x0;  //desliga
	tps();  // espera 1 segundo;
}

//funções de PREDEFINIÇÕES.
void it0(){
	GPIOC->ODR=0x0; // 0000000
	tps();
}
void it1(){
	GPIOC->ODR=0X1; // 1000000
	tps();
}
void it2(){
	GPIOC->ODR=0X3; // 1100000
	tps();
}
void it3(){
	GPIOC->ODR=0X7; // 1110000
	tps();
}
void it4(){
	GPIOC->ODR=0XF; // 1111000
	tps();
}
void it5(){
	GPIOC->ODR=0X1F; // 1111100
	tps();
}
void it6(){
	GPIOC->ODR=0X3F; // 1111110
	tps();
}
void it7(){
	GPIOC->ODR=0X7F; // 1111111
	tps();
}
//////////

int main()
{
   RCC->AHB1ENR=0X87;
   GPIOC->MODER|=0X5555;
   GPIOB->MODER|=0X0;
   GPIOA->MODER|=0X28000400;

  while(1){
	  if(((GPIOB->IDR&0X100)==0X100)&& trava==0){
		  c=rand()%6;
			  trava=1;}
	  }

  	  if(((GPIOB->IDR&=0x100) == 0x0) && trava == 1){
  		  	  trava=0;
  			if(c==0){
  				c=rand()%6;
  			  }

      if(c==0){
    	  it0();
    	  tps();
      }
      }
	  if(c==1){ //=1
		  it1();
		  tps();
	  }
	  if(c==2){ //=2
		  it2();
		  tps();
	  }
	  if(c==3){ //=3
		  it3();
		  tps();
	  }
	  if(c==4){ //=4
		  it4();
		  tps();
	  }
	  if(c==5){ //=5
		  it5();
		  tps();
	  }
	  if(c==6){ //=6
		  it6();
		  tps();
	  }
	  if(c==7){  //=7
		  it7();
		  tps();
	  }
  	}
  }
  }

